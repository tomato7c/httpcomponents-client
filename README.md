java 式 scala 代码，少量使用 scala 特性
某些为了性能的奇葩代码都以可读性优先的方式来实现